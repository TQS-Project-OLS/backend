groups:
- name: olsheets.rules
  rules:
  # Application Health Alert
  - alert: ApplicationDown
    expr: up{job="olsheets-backend"} == 0
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "OLSheets application is down"
      description: "OLSheets application {{ $labels.instance }} has been down for more than 1 minute."

  # High Error Rate Alert (using Spring Boot metrics)
  - alert: HighErrorRate
    expr: rate(http_server_requests_seconds_count{status=~"5.."}[5m]) > 0.1
    for: 2m
    labels:
      severity: warning
    annotations:
      summary: "High error rate detected"
      description: "Error rate is {{ $value }} errors per second over the last 5 minutes."

  # Memory Usage Alert (using JVM metrics)
  - alert: HighMemoryUsage
    expr: (jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"}) > 0.9
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "High JVM heap memory usage"
      description: "JVM heap memory usage is {{ $value | humanizePercentage }} on {{ $labels.instance }}."